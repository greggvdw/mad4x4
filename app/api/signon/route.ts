import { NextRequest, NextResponse } from 'next/server';import { supabaseServer } from '../../lib/supabase';export async function POST(req: NextRequest){const s=supabaseServer();const form=await req.formData();const event_id=Number(form.get('event_id'));const full_name=String(form.get('full_name')||'');const email=form.get('email')?String(form.get('email')):null;const phone=form.get('phone')?String(form.get('phone')):null;const vehicle_rego=form.get('vehicle_rego')?String(form.get('vehicle_rego')):null;const passengers=form.get('passengers')?String(form.get('passengers')):null;const emergency_contact=form.get('emergency_contact')?String(form.get('emergency_contact')):null;const medical_info=form.get('medical_info')?String(form.get('medical_info')):null;const acknowledgement=form.get('acknowledgement')?true:false;if(!event_id||!full_name) return NextResponse.json({error:'Missing required fields'},{status:400});const { error }=await s.from('sign_on_forms').insert({event_id,full_name,email,phone,vehicle_rego,passengers,emergency_contact,medical_info,acknowledgement});if(error) return NextResponse.json({error:error.message},{status:400});return NextResponse.json({ok:true});}